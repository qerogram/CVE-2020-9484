#!/bin/bash
# author : qerogram

sudo apt-get install tomcat9=9.0.16-3ubuntu0.18.04.1 -y
sudo apt-get update && apt-get install netcat -y
echo 2 | sudo update-alternatives --config nc

sudo ln -s /usr/share/tomcat9/etc/ /usr/share/tomcat9/conf

sudo rm /var/lib/tomcat9/webapps/ROOT/index.html
sudo mv ./index.jsp /var/lib/tomcat9/webapps/ROOT/index.jsp
sudo echo "<% session.getId(); %>" > test
sudo mv ./test /var/lib/tomcat9/webapps/ROOT/test
sudo rm /usr/share/tomcat9/etc/context.xml
sudo cp ./context.xml /usr/share/tomcat9/etc/context.xml
sudo rm /etc/tomcat9/context.xml
sudo mv ./context.xml /etc/tomcat9/
sudo mv ./groovy-2.3.9.jar /usr/share/tomcat9/lib/groovy-2.3.9.jar

sudo mkdir -p /tomcat/sessions

sudo service tomcat9 restart
sudo /usr/share/tomcat9/bin/catalina.sh run &
